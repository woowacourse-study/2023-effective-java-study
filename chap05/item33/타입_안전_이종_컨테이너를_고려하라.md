<br><br>

## ğŸ§ ë¦¬í„°ëŸ´ê³¼ í´ë˜ìŠ¤ ë¦¬í„°ëŸ´

**ë¦¬í„°ëŸ´**(Literal)ì€ ì†ŒìŠ¤ ì½”ë“œ ìƒì— ì§ì ‘ì ìœ¼ë¡œ ë‚˜íƒ€ë‚˜ëŠ” **ë°ì´í„° ê°’ ê·¸ ìì²´**ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, ì •ìˆ˜í˜• ë¦¬í„°ëŸ´ì€ 23ê³¼ ê°™ì´ ìˆ«ìë¡œ ì´ë£¨ì–´ì§„ ê°’ì´ë©°, ë¬¸ìì—´ ë¦¬í„°ëŸ´ì€ "hello world" ì™€ ê°™ì´ ë”°ì˜´í‘œë¡œ ê°ì‹¸ì§„ ë¬¸ìì—´ ê°’ì…ë‹ˆë‹¤.

í´ë˜ìŠ¤ ë¦¬í„°ëŸ´ì€ í´ë˜ìŠ¤ì˜ ì´ë¦„ì„ ì°¸ì¡°í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, String.**class** ì™€ ê°™ì´ í´ë˜ìŠ¤ ì´ë¦„ ë’¤ì— **.class**ë¥¼ ë¶™ì—¬ì„œ ì‚¬ìš©ë©ë‹ˆë‹¤.

ê·¸ë¦¬ê³  ì´ëŸ¬í•œ í´ë˜ìŠ¤ ë¦¬í„°ëŸ´ì˜ íƒ€ì…ì€  `Class<T>` ì…ë‹ˆë‹¤.

![img](./img/img.png)

ì˜ˆë¥¼ ë“¤ì–´ **String**.classì˜ íƒ€ì…ì€ Class<**String**>, **Integer**.classì˜ íƒ€ì…ì€ Class<**Integer**>ì¸ ê²ƒì…ë‹ˆë‹¤.

```java
final Class<String> stringClass = String.class;
final Class<Integer> integerClass = Integer.class;
```

<br><br><br>

## ğŸ§ íƒ€ì… í† í°

ì»´íŒŒì¼ì‹œì˜ íƒ€ì… ì •ë³´ì™€, ëŸ°íƒ€ì„ì‹œì˜ íƒ€ì… ì •ë³´ë¥¼ ì•Œì•„ë‚´ê¸° ìœ„í•´ ë©”ì„œë“œë“¤ì´ ì£¼ê³ ë°›ëŠ” í´ë˜ìŠ¤ ë¦¬í„°ëŸ´ì„ **íƒ€ì… í† í°**ì´ë¼ê³  í•©ë‹ˆë‹¤.

íƒ€ì… í† í°ì€ ì£¼ë¡œ ì œë„¤ë¦­ íƒ€ì…ì„ ì‚¬ìš©í•˜ëŠ” ë©”ì„œë“œë‚˜ í´ë˜ìŠ¤ì—ì„œ íƒ€ì… ì •ë³´ë¥¼ ì „ë‹¬í•˜ëŠ” ìš©ë„ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤.

ì¡°ê¸ˆ ë” ë²”ìš©ì ìœ¼ë¡œ í‘œí˜„í•˜ìë©´, íƒ€ì… í† í°ì€ ëŒ€ì²´ë¡œ **íƒ€ì… ì•ˆì •ì„±**ì´ í•„ìš”í•œ ê³³ì— ì‚¬ìš©ë˜ëŠ”ë° ëŒ€í‘œì ì¸ ì˜ˆì‹œë¡œëŠ” RestTemplate í˜¹ì€ ObjectMapperë“±ì´ ìˆìŠµë‹ˆë‹¤.

```
MyLittleTelevision mlt = objectMapper.readValue(jsonString, MyLittleTelevision.class);
```

<br><br><br>

## ğŸ§ ì œë„¤ë¦­ì˜ ì¼ë°˜ì ì¸ ì“°ì„

ì œë„¤ë¦­ì€ Set<E>, Map<K, V> ë“±ì˜ ì»¬ë ‰ì…˜ê³¼, `ThreadLocal<T>`, `AtomicReference<T>` ë“±ì˜ ë‹¨ì¼ì›ì†Œ ì»¨í…Œì´ë„ˆì—ì„œ í”íˆ ì‚¬ìš©ë©ë‹ˆë‹¤.

ì´ëŸ¬í•œ ëª¨ë“  ì“°ì„ì—ì„œ ë§¤ê°œë³€ìˆ˜í™”ë˜ëŠ” ëŒ€ìƒì€ ì»¨í…Œì´ë„ˆ ìì‹ ì¸ë°, ì˜ˆë¥¼ ë“¤ì–´ ThreadLocalì˜ ê²½ìš°, `ThreadLocal<Integer>` ë“±ê³¼ ê°™ì´ **ì»¨í…Œì´ë„ˆ ìì‹ **ì„ ë§¤ê°œë³€ìˆ˜í™”í•©ë‹ˆë‹¤.

ë”°ë¼ì„œ í•˜ë‚˜ì˜ ì»¨í…Œì´ë„ˆì—ì„œ **ë§¤ê°œë³€ìˆ˜í™”í•  ìˆ˜ ìˆëŠ” íƒ€ì…ì˜ ìˆ˜ê°€ ì œí•œ**ë©ë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´ `Set<E>`ì˜ ê²½ìš°, ì›ì†Œì˜ íƒ€ì…ì„ ëœ»í•˜ëŠ” ë‹¨ í•˜ë‚˜ì˜ íƒ€ì… ë§¤ê°œë³€ìˆ˜ë§Œì„ í•„ìš”ë¡œ í•˜ë©°, Map<K, V>ëŠ” í‚¤ì™€ ê°’ì„ ëœ»í•˜ëŠ” ë‘ê°œì˜ íƒ€ì… ë§¤ê°œë³€ìˆ˜ê°€ í•„ìš”í•œ ì‹ì…ë‹ˆë‹¤.

<br><br><br>

## ğŸ§ íƒ€ì… ì•ˆì „ ì´ì¢… ì»¨í…Œì´ë„ˆ íŒ¨í„´

ê·¸ëŸ¬ë‚˜ ì¢…ì¢… í•œê°€ì§€ íƒ€ì…ì´ ì•„ë‹Œ ì—¬ëŸ¬ íƒ€ì…ì˜ ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•´ì„œ ê°ê°ì„ íƒ€ì… ì•ˆì „í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ìˆ˜ë‹¨ì´ í•„ìš”í•œ ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤.

ì´ë¥¼ ìœ„í•œ ì‰¬ìš´ í•´ë²•ìœ¼ë¡œëŠ” ì»¨í…Œì´ë„ˆ ëŒ€ì‹  **í‚¤ë¥¼ ë§¤ê°œë³€ìˆ˜í™”**í•œ ë‹¤ìŒ, ì»¨í…Œì´ë„ˆì— ê°’ì„ ë„£ê±°ë‚˜ ëº„ ë•Œ ë§¤ê°œë³€ìˆ˜í™”í•œ í‚¤ë¥¼ í•¨ê»˜ ì œê³µí•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

ì´ë ‡ê²Œ í•˜ë©´ ì œë„¤ë¦­ íƒ€ì… ì‹œìŠ¤í…œì´ ê°’ì˜ íƒ€ì…ì´ í‚¤ì™€ ê°™ìŒì„ ë³´ì¥í•´ì¤„ ê²ƒì…ë‹ˆë‹¤.

ê°„ë‹¨í•œ ì˜ˆì‹œë¡œ íƒ€ì…ë³„ë¡œ ì¦ê²¨ ì°¾ëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì €ì¥í•˜ê³  ê²€ìƒ‰í•  ìˆ˜ ìˆëŠ” Favorites í´ë˜ìŠ¤ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•´ ë³´ì•˜ìŠµë‹ˆë‹¤.

```java
import java.util.*;

public class Favorites {

    private Map<Class<?>, Object> favorites = new HashMap<>();

    public <T> void putFavorite(Class<T> type, T instance) {
        favorites.put(Objects.requireNonNull(type), instance);
    }
    public <T> T getFavorite(Class<T> type){
        return type.cast(favorites.get(type));
    }
}
```

ê° íƒ€ì…ì˜ Class ê°ì²´ë¥¼ ë§¤ê°œë³€ìˆ˜í™”í•œ Keyë¡œ ì‚¬ìš©í•˜ì—¬, í•´ë‹¹ íƒ€ì…ì— ë§ëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì €ì¥í•˜ë„ë¡ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.

ì´ë¥¼ ì‚¬ìš©í•˜ëŠ” ì˜ˆì‹œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

```java
Favorites f = new Favorites();

f.putFavorite(String.class, "Java");
f.putFavorite(Integer.class, 22);
f.putFavorite(Class.class, Favorites.class);

final String favorite = f.getFavorite(String.class);  // java
final Integer favorite1 = f.getFavorite(Integer.class);  // 22
final Class<?> favorite2 = f.getFavorite(Class.class);  // Class<Favorites>
```

<br><br><br>

## ğŸ§ íƒ€ì… ì•ˆì „ ì´ì¢… ì»¨í…Œì´ë„ˆ íŒ¨í„´ì˜ ë¬¸ì œì 

<br><br>

### ğŸ˜¡ Class ê°ì²´ë¥¼ ì œë„¤ë¦­ì´ ì•„ë‹Œ ë¡œ íƒ€ì…ìœ¼ë¡œ ë„˜ê¸°ëŠ” ê²½ìš°, íƒ€ì… ì•ˆì •ì„±ì´ ê¹¨ì§‘ë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•˜ëŠ” ê²½ìš°ì…ë‹ˆë‹¤.

```java
f.putFavorite((Class)Integer.class, "Integerì˜ ì¸ìŠ¤í„´ìŠ¤ê°€ ì•„ë‹™ë‹ˆë‹¤.");

int fInt = f.getFavorite(Integer.class);  // ClassCastException ë°œìƒ
```

ë§Œì•½ Favoritesê°€ íƒ€ì… ë¶ˆë³€ì‹ì„ ì–´ê¸°ëŠ” ì¼ì´ ì—†ë„ë¡ ë³´ì¥í•˜ê¸° ìœ„í•´ì„œëŠ” ì•„ë˜ì™€ ê°™ì´ putFavorite ë©”ì„œë“œì—ì„œ ì¸ìˆ˜ë¡œ ì£¼ì–´ì§„ instance íƒ€ì…ì´ typeìœ¼ë¡œ ëª…ì‹œí•œ íƒ€ì…ê³¼ ê°™ì€ì§€ í™•ì¸í•˜ë©´ ë©ë‹ˆë‹¤.

```java
public <T> void putFavorite(Class<T> type, T instance) {
    favorites.put(Objects.requireNonNull(type), type.cast(instance));
}
```

ì´ëŸ¬í•œ ë°©ì‹ì„ ì ìš©í•œ ëŒ€í‘œì  ì˜ˆì‹œë¡œëŠ” Collectionsì˜ checkedSet, checkedList, checkedMapë“±ì´ ìˆìŠµë‹ˆë‹¤.

![img](./img/img_1.png)

ì´ë“¤ì€ ì»¬ë ‰ì…˜(í˜¹ì€ Map)ê³¼ í•¨ê»˜ 1ê°œì˜(í˜¹ì€ 2ê°œ) Class ê°ì²´ë¥¼ ë°›ìŠµë‹ˆë‹¤.

ì´ ë©”ì„œë“œë“¤ì€ ëª¨ë‘ Class ê°ì²´ì™€ ì»¬ë ‰ì…˜ì˜ ì»´íŒŒì¼íƒ€ì„ íƒ€ì…ì´ ê°™ìŒì„ ë³´ì¥í•©ë‹ˆë‹¤.

<br><br>

### ğŸ˜¡ ì‹¤ì²´í™” ë¶ˆê°€ íƒ€ì…ì—ëŠ” ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

**ì‹¤ì²´í™” ë¶ˆê°€ íƒ€ì…**ì€ E, `List<E>`, `List<String>`ë“±ì™€ ê°™ì´ ì‹¤ì²´í™”ë˜ì§€ ì•Šìœ¼ë©°, ëŸ°íƒ€ì„ì—ëŠ” ì»´íŒŒì¼íƒ€ì„ë³´ë‹¤ íƒ€ì… ì •ë³´ë¥¼ ì ê²Œ ê°€ì§€ëŠ” íƒ€ì…ì…ë‹ˆë‹¤.

ì¦‰ ì¦ê²¨ ì°¾ëŠ” String ì´ë‚˜, String[ ] ì€ ì €ì¥í•  ìˆ˜ ìˆì§€ë§Œ, ì¦ê²¨ ì°¾ëŠ” `List\<String>` ì€ ì €ì¥í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

![img](./img/img_2.png)

ìœ„ì™€ ê°™ì€ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ” ì´ìœ ëŠ” `List<String>` ìš© Class ê°ì²´ë¥¼ ì–»ì„ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

`List<String>`ì— ëŒ€í•œ Class ëŠ” ì–»ì„ ìˆ˜ ì—†ì§€ë§Œ, `List`ì— ëŒ€í•œ Class ê°ì²´ëŠ” ì–»ì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ìœ„ ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ì´ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```java
List<String> favoriteStringList = new ArrayList<>();
favorites.putFavorite(List.class, favoriteStringList);
```

ê·¸ëŸ¬ë‚˜ `List<String>`ê³¼, `List<Integer>` ë“± ëª¨ë“  `List<T>` ì˜ í´ë˜ìŠ¤ ë¦¬í„°ëŸ´ì€ `Class<List>` ì´ë¯€ë¡œ, ë‹¤ìŒê³¼ ê°™ì´ ì½”ë“œê°€ ì‘ì„±ëœë‹¤ë©´, íƒ€ì… ì•ˆì •ì„±ì´ ê¹¨ì§€ê²Œë©ë‹ˆë‹¤.

```java
List<String> favoriteStringList = new ArrayList<>();
favoriteStringList.add("f1");

List<Integer> favoriteIntegerList = new ArrayList<>();
favoriteIntegerList.add(1);

favorites.putFavorite(List.class, favoriteStringList);
favorites.putFavorite(List.class, favoriteIntegerList);

final List<Integer> favorite1 = favorites.getFavorite(List.class);
System.out.println(favorite1.get(0));

final List<String> favorite2 = favorites.getFavorite(List.class);
System.out.println(favorite2.get(0));  // ClassCastException
```

ì´ëŸ¬í•œ ë‘ ë²ˆì§¸ ë¬¸ì œì ì— ëŒ€í•´ì„œëŠ” ì™„ë²½íˆ ë§Œì¡±ìŠ¤ëŸ¬ìš´ ìš°íšŒë¡œëŠ” ì—†ë‹¤ê³  í•˜ì§€ë§Œ, ì–´ëŠì •ë„ í•´ê²°í•˜ëŠ” ë°©ë²•ì€ ìˆìŠµë‹ˆë‹¤.

ë°”ë¡œ **ìŠˆí¼ íƒ€ì… í† í°**(Super type token)ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

<br><br><br>

## ğŸ§ ìŠˆí¼ íƒ€ì… í† í°

ì•ì„œ ì‚´í´ë³¸ ê²ƒ ì²˜ëŸ¼, `List<String>`ê³¼ ê°™ì€ ì‹¤ì²´í™” ë¶ˆê°€ íƒ€ì…ì— ëŒ€í•œ íƒ€ì… ì •ë³´ëŠ” ì–»ì–´ë‚¼ ë°©ë²•ì´ ì—†ì—ˆìŠµë‹ˆë‹¤.

ê·¸ëŸ¬ë‚˜ **ì´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆëŠ” ê²½ìš°**ê°€ ìˆëŠ”ë° ë°”ë¡œ ì œë„¤ë¦­ í´ë˜ìŠ¤ë¥¼ ìˆ˜í¼íƒ€ì…ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì…ë‹ˆë‹¤.

ì˜ˆì‹œë¥¼ í†µí•´ í™•ì¸í•˜ê² ìŠµë‹ˆë‹¤.

```java
public class SuperTypeToken {

    static class Sup<T> {
        T value;
    }

    public static void main(String[] args) throws NoSuchFieldException {
        Sup<String> s = new Sup<>();

        System.out.println(s.getClass().getDeclaredField("value").getType()); // class java.lang.Object
    }
}
```

ìœ„ì™€ ê°™ì´ Reflectionì„ ì‚¬ìš©í•˜ë”ë¼ë„, ëŸ°íƒ€ì„ ì‹œì—ëŠ” Tê°€ Type Eraserì— ì˜í•´ ì œê±°ë˜ë¯€ë¡œ íƒ€ì… ì •ë³´ë¥¼ ì•Œ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

ê·¸ëŸ¬ë‚˜ ì•„ë˜ì™€ ê°™ì´ ìˆ˜í¼ íƒ€ì…ì„ í™œìš©í•œë‹¤ë©´, ì§€ê¸ˆê¹Œì§€ ê°€ì ¸ì˜¤ì§€ ëª»í–ˆë˜ `List<String>` ë“±ì˜ íƒ€ì… ì •ë³´ ë˜í•œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```java
class Sup<T> {}

class Sub extends Sup<List<String>> {}
```

ì´ì œ List<String>ì— ëŒ€í•œ ì •ë³´ë¥¼ ê°€ì§€ê³  ì™€ ë³¼ ê²ƒì¸ë°, ì´ëŠ” Classì˜ **getGenericSuperclass**() ë©”ì„œë“œë¥¼ í†µí•´ì„œ ê°€ëŠ¥í•©ë‹ˆë‹¤.

ìš°ì„  ì‚¬ìš© ì˜ˆì‹œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

```java
class Sup<T> {}

class Sub extends Sup<List<String>> {}

public class SuperTypeToken {

    public static void main(String[] args) {
        final Sub sub = new Sub();

        final Type t = sub.getClass().getGenericSuperclass(); // SuperTypeToken$Sup<java.util.List<java.lang.String>>
        ParameterizedType parameterizedType = (ParameterizedType) t;
        System.out.println(parameterizedType.getActualTypeArguments()[0]);
    }
}
```

![img](./img/img_3.png)

<br><br><br>

### ğŸ“• Class.getGenericSuperclass()

ìœ„ ë©”ì„œë“œì˜ ì„¤ëª…ì„ ë³´ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

> Returns the Type representing the direct superclass of the entity (class, interface, primitive type or void) represented by this Class object. If the superclass is a parameterized type, the Type object returned must accurately reflect the actual type arguments used in the source code. The parameterized type representing the superclass is created if it had not been created before. See the declaration of ParameterizedType for the semantics of the creation process for parameterized types. If this Class object represents either the Object class, an interface, a primitive type, or void, then null is returned. If this Class object represents an array class then the Class object representing the Object class is returned. Returns: the direct superclass of the class represented by this Class object 
>

ìš”ì•½í•˜ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

> ì´ Classê°€ ë‚˜íƒ€ë‚´ëŠ” ì—”í‹°í‹°(í´ë˜ìŠ¤, ì¸í„°í˜ì´ìŠ¤ ë“±)ì˜ ì§ì ‘ì ì¸ ìŠˆí¼í´ë˜ìŠ¤ì˜ íƒ€ì…ì„ ë°˜í™˜í•œë‹¤.  
> ë°”ë¡œ ìœ„ì˜ **ìŠˆí¼í´ë˜ìŠ¤ê°€ íŒŒë¼ë¯¸í„°í™”ëœ íƒ€ì…(ParameterizedType)** ì´ë©´, **ì‹¤ì œ íƒ€ì… íƒ€ë¼ë¯¸í„°ë“¤ì„ ë°˜ì˜í•œ íƒ€ì…**ì„ ë°˜í™˜í•´ì•¼ í•œë‹¤.

ê·¸ëŸ¬ë‚˜ ìœ„ì˜ ì˜ˆì‹œì—ì„œ ì‚´í´ë³¸ ê²ƒ ì²˜ëŸ¼, ìŠˆí¼ íƒ€ì… í† í°ì„ í™œìš©í•˜ëŠ” ì½”ë“œëŠ” ë„ˆë¬´ ë³µì¡í•©ë‹ˆë‹¤.

ë”°ë¼ì„œ ì´ë¥¼ ì¡°ê¸ˆ í¸í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ìµëª… í´ë˜ìŠ¤ë¥¼ í™œìš©í•˜ì—¬ ë‹¤ìŒê³¼ ê°™ì´ ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```java
class ParameterizedTypeReference<T> {

    Type type;

    protected ParameterizedTypeReference() {
        final Type stype = getClass().getGenericSuperclass();

        if (stype instanceof ParameterizedType pt) {
            this.type = pt.getActualTypeArguments()[0];
        }
        else {
            throw new RuntimeException();
        }
    }

    public Type type() {
        return type;
    }
}

class Test {
    public static void main(String[] args) {
        final Type type = new ParameterizedTypeReference<List<String>>() {}.type();
        System.out.println(type);  // java.util.List<java.lang.String>
    }
}
```

ì´ì œ ìŠˆí¼ íƒ€ì… í† í°ì„ í™œìš©í•˜ê¸° ìœ„í•´ì„œëŠ”, í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì—ì„œ ParameterizedTypeReferenceë¥¼ ìƒì†ë°›ì€ ìµëª… í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ í›„, typeì— ì ‘ê·¼í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.


<br><br><br>

## ğŸ§ ìŠˆí¼ íƒ€ì… í† í°ì˜ í™œìš©

ìŠˆí¼ íƒ€ì… í† í°ì„ í†µí•´, ì´ì „ì— ì‚´í´ë³¸ íƒ€ì… ì•ˆì „ ì´ì¢… ì»¨í…Œì´ë„ˆì˜ ì‹¤ì²´í™” ë¶ˆê°€ íƒ€ì…ì—ëŠ” ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤ëŠ” ì œì•½ì„ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```java
public class Favorites {

    private Map<ParameterizedTypeReference<?>, Object> favorites = new HashMap<>();

    public <T> void putFavorite(ParameterizedTypeReference<T> type, T instance) {
        favorites.put(Objects.requireNonNull(type), instance);
    }

    public <T> T getFavorite(ParameterizedTypeReference<T> tr) {
        if (tr.type instanceof  Class<?>)  // ParameterizedTypeReference<String> ê³¼ ê°™ì€ ê²½ìš°
            return ((Class<T>)tr.type).cast(favorites.get(tr));
        else  // ParameterizedTypeReference<List<String>> ê³¼ ê°™ì€ ê²½ìš° ì´ëŠ” Class íƒ€ì…ì´ ì•„ë‹ˆë¼ ParameterizedType íƒ€ì…ì´ë‹¤.
            return ((Class<T>)((ParameterizedType)tr.type).getRawType()).cast(favorites.get(tr));
    }
}

class ParameterizedTypeReference<T> {
    Type type;

    protected ParameterizedTypeReference() {
        final Type stype = getClass().getGenericSuperclass();

        if (stype instanceof ParameterizedType pt) {
            this.type = pt.getActualTypeArguments()[0];
        } else {
            throw new RuntimeException();
        }
    }

    public Type type() {
        return type;
    }

    @Override
    public boolean equals(final Object o) {
        if (this == o) return true;
        if (!(o instanceof final ParameterizedTypeReference<?> that)) return false;
        return Objects.equals(type, that.type);
    }

    @Override
    public int hashCode() {
        return Objects.hash(type);
    }
}
```

ì´ì œ ì´ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```java
final Favorites favorites = new Favorites();

favorites.putFavorite(new ParameterizedTypeReference<>(){}, "123");
final String favorite = favorites.getFavorite(new ParameterizedTypeReference<>(){});
System.out.println(favorite);

final List<String> strings = List.of("f1", "f2", "f3");
favorites.putFavorite(new ParameterizedTypeReference<List<String>>() {}, strings);

final List<Integer> integers = List.of(1, 2, 3);
favorites.putFavorite(new ParameterizedTypeReference</* ìƒëµë„ ê°€ëŠ¥ */>(){}, integers);

final List<Integer> favoriteInts = favorites.getFavorite(new ParameterizedTypeReference<List<Integer>>(){});
favoriteInts.forEach(System.out::println);

final List<String> favoriteStrings = favorites.getFavorite(new ParameterizedTypeReference<>(){});
favoriteStrings.forEach(System.out::println);
```

<br><br><br>

## ğŸ§ ì •ë¦¬

(Collection APIì™€ ê°™ì€) ì¼ë°˜ì ì¸ ì œë„¤ë¦­ í˜•íƒœì—ì„œëŠ” í•œ ì»¨í…Œì´ë„ˆê°€ ë‹¤ë£° ìˆ˜ ìˆëŠ” íƒ€ì… ë§¤ê°œë³€ìˆ˜ì˜ ìˆ˜ê°€ ê³ ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

í•˜ì§€ë§Œ ì»¨í…Œì´ë„ˆ ìì²´ë¥¼ ë§¤ê°œë³€ìˆ˜í™” í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, í‚¤ë¥¼ íƒ€ì… ë§¤ê°œë³€ìˆ˜ë¡œ ë°”ê¾¸ë©´ ì´ëŸ¬í•œ ì œì•½ì´ ì—†ëŠ” **íƒ€ì… ì•ˆì „ ì´ì¢… ì»¨í…Œì´ë„ˆ**ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

íƒ€ì… ì•ˆì „ ì´ì¢… ì»¨í…Œì´ë„ˆëŠ” Classë¥¼ í‚¤ë¡œ ì“°ë©°, ì´ëŸ° ì‹ìœ¼ë¡œ ì“°ì´ëŠ” Class ê°ì²´ë¥¼ **íƒ€ì… í† í°**ì´ë¼ í•©ë‹ˆë‹¤.

ë˜í•œ íƒ€ì… í† í°ì´ ì•„ë‹ˆë”ë¼ë„, ì§ì ‘ êµ¬í˜„í•œ í‚¤ íƒ€ì… ì—­ì‹œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´ `Class<T>` ëŒ€ì‹  `MyToken<T>` ì™€ ê°™ì´ ë§ì…ë‹ˆë‹¤.

ê·¸ëŸ¬ë‚˜ íƒ€ì… ì•ˆì „ ì´ì¢… ì»¨í…Œì´ë„ˆëŠ” ì‹¤ì²´í™” ë¶ˆê°€ íƒ€ì…ì—ëŠ” ì ìš© ë¶ˆê°€ëŠ¥í•˜ë‹¤ëŠ” ì œì•½ì´ ìˆì—ˆìŠµë‹ˆë‹¤.

ì´ì— ëŒ€í•œ ì™„ë²½í•œ í•´ë²•ì€ ì•„ë‹ˆì§€ë§Œ, **ìŠˆí¼ íƒ€ì… í† í°**ì„ í†µí•´ ì´ëŸ¬í•œ ì œì•½ì„ ì–´ëŠì •ë„ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.



<br><br><br>
